webpackJsonp([1],{"2Ipe":function(e,t,o){"use strict";function n(e){return d[e]}function r(e,t){var o=window.CodePlayer,n=window.setup_video,r=e.problem_slug,a=e.p_type_verbose;n({langs:JSON.stringify(e.langs_info.map(function(e){return e.id})),problem_slug:r,p_type_verbose:a},function(n){if("OK"==n.status){var r=n.lang_code_video_id_map;for(var a in r){var i=r[a].id,l=(0,c.getSessionId)(e,a);i&&(d[l]=new o(i,{animate_save:t})),s(a,e.private_url_hash,l)}}},{})}function a(e){var t=d[e];if(t){return t.finish_recording()}}function i(e,t,o,n){var r=d[e];r&&(r.enqueue_changeset(o,t,n),r.start_recording())}function s(e,t,o){var r=(0,c.getKey)(t,e,"delta"),a=(0,c.getKey)(t,e,"source"),i=(0,c.get_from_local_storage)(r),s=n(o);if(i){s.changeset_queue=s.changeset_queue.concat(i);var l=function(){(0,c.remove_from_local_storage)(r),(0,c.remove_from_local_storage)(a)};s.start_recording(100,l)}}Object.defineProperty(t,"__esModule",{value:!0}),t.getCodePlayerForSessionId=n,t.setUpCodePlayers=r,t.codePlayerFinishRecording=a,t.codePlayerEnqueueChangeset=i,t.savePreviousAnonChangeSets=s;var l=o("kX7f"),u=function(e){return e&&e.__esModule?e:{default:e}}(l),c=o("bInE");window.AceDocument=u.default.acequire("ace/document").Document,window.SessionIdCodePlayerMap={};var d=window.SessionIdCodePlayerMap},A79w:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.SubEditor=void 0;var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e},l=function(){function e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}(),u=o("U7vG"),c=n(u),d=o("RH2O"),p=o("m/Dr"),_=n(p),h=o("WJ9Z"),f=o("bInE"),m=o("r6Ka"),g=o("d6GN"),v=o("Gh1z");o("NBbx"),o("RmHk");var y=window.CodeEditorText,b=function(e){function t(){r(this,t);var e=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.swapShowInput=e._swapShowInput.bind(e),e.onCustomInputChange=e._onCustomInputChange.bind(e),e.onOtherBotUserChange=e._onOtherBotUserChange.bind(e),e.onClickOnSubmit=e._onClickOnSubmit.bind(e),e.onClickOnCompile=e._onClickOnCompile.bind(e),e.state={submission_id:null,is_polling:!1},e}return i(t,e),l(t,[{key:"hasStateInitialized",value:function(){return void 0!==this.props.sub_data}},{key:"componentDidMount",value:function(){var e=this;this.hasStateInitialized()||this.props.dispatch(m.actions.initSubEditor(this.props.root)),this.props.is_bot_problem&&this.props.is_authenticated&&jQuery.post(this.props.other_bot_users_url,function(t){e.props.dispatch(m.actions.updateOtherBotUsers(e.props.root,t))})}},{key:"componentWillReceiveProps",value:function(e){this.hasStateInitialized()&&1==this.props.sub_data.fetching_response&&0==e.sub_data.fetching_response&&(this.scroll_to_response=!0)}},{key:"componentDidUpdate",value:function(){if(this.scroll_to_response){this.scroll_to_response=!1;var e=null;if(e=this.props.sub_data.log_response?this.refs.log_response_container:this.refs.sub_response_container)if(this.props.assessment){var t=jQuery(".right-pane");t.animate({scrollTop:t.scrollTop()+jQuery(e).offset().top-t.offset().top-20},500,"linear")}else{var o=jQuery(e).closest(".code-editor-scroll-container");o.length>0?o.animate({scrollTop:jQuery(e).offset().top-20},500,"linear"):jQuery("body,html").animate({scrollTop:jQuery(e).offset().top-20},500,"linear")}}this.state.submission_id&&!this.state.is_polling&&((0,g.log_submission_state)(this.state.submission_id,v.TRACELOG_RESULT_DISPLAYED_STATE),this.setState({submission_id:null,is_polling:!1}))}},{key:"_swapShowInput",value:function(){this.props.dispatch(m.actions.swapShowInput(this.props.root))}},{key:"_onCustomInputChange",value:function(e){this.props.dispatch(m.actions.customInputChange(this.props.root,e.target.value))}},{key:"_onOtherBotUserChange",value:function(e){this.props.dispatch(m.actions.otherBotUserIdChange(this.props.root,e&&e.value))}},{key:"poll",value:function(e,t){var o=this;jQuery.post(e,function(n){if(o.props.dispatch(m.actions.fetchResponseSuccess(o.props.root,n,t)),(0,g.shouldPoll)(n))o.poll_timeout=setTimeout(o.poll.bind(o,e,t),1e3);else{o.setState({is_polling:!1});var r="";o.props.root_data&&(r=o.props.root_data.current_lang),o.props.dispatch(m.actions.updateCompilationMessage(o.props.root,n,r))}})}},{key:"_onClickOnCompile",value:function(){var e=this,t=this.props,o=t.root,n=t.sub_data,r=t.root_data,a=t.problem_slug,i=t.private_url_hash,s=t.p_type_verbose,l=t.dryrun_url;if(t.is_authenticated){var u=(0,f.getSourceData)(r),c=l,d={source:u.source,lang:r.current_lang,changeset_timestamp:u.last_edited,problem_slug:a,private_hash:i,input:n.input_text,p_type_v:s};this.fetchResponse(o,c,d,!0,function(t,o){return e.poll.bind(e,t,o)})}else(0,f.showLoginModal)()}},{key:"_onClickOnSubmit",value:function(){var e=this,t=this.props,o=t.root,n=t.root_data,r=t.problem_slug,a=t.private_url_hash,i=t.p_type_verbose,s=t.submit_url,l=t.is_authenticated,u=t.is_bot_problem;if(l){var c=(0,f.getSourceData)(n),d=s,p={source:c.source,lang:n.current_lang,changeset_timestamp:c.last_edited,problem_slug:r,private_hash:a,problem_type:i};if(u){var _=this.props.sub_data.current_other_bot_user_id;-1==_&&(_=0),p.user_id=_}this.setState({submission_id:null}),this.fetchResponse(o,d,p,!1,function(t,o){return e.poll.bind(e,t,o)})}else(0,f.showLoginModal)()}},{key:"fetchResponse",value:function(e,t,o,n,r){var a=this;this.props.dispatch(m.actions.fetchResponse(e,n)),this.props.submission_source&&(o=s({},o,{submission_source:this.props.submission_source})),this.poll_timeout&&clearTimeout(this.poll_timeout),jQuery.ajax({type:"POST",url:t,data:o,dataType:"text"}).done(function(t){var o;try{o=JSON.parse(t)}catch(e){Raven&&Raven.captureException(e,{extra:{origin:"compile or submit",data:t}})}if(a.props.dispatch(m.actions.fetchResponseSuccess(e,o.html,n)),a.setState({is_polling:!0}),!n){var i=o.submission_id;a.setState({submission_id:i||null})}(0,g.shouldPoll)(o.html)&&o.url&&(a.poll_timeout=setTimeout(r(o.url,n),1e3))})}},{key:"render",value:function(){if(!this.hasStateInitialized())return null;var e=this.props,t=e.sub_data,o=e.root_data,n=!1;o&&null!==o.current_lang&&!t.fetching_response&&(n=!0);var r=!0;!0===this.props.disable_custom_input&&(r=!1);var a="custom-input-trigger-"+this.props.private_url_hash,i="compile-test-button-"+this.props.private_url_hash,s="submit-button-"+this.props.private_url_hash,l=this.props,u=l.problem_id,d=l.problem_slug,p=l.p_type,f=l.p_type_verbose,m=l.private_url_hash,g=l.langs_info,b=l.langs_code_ajax_url,C=l.last_lang,E=l.is_authenticated,S=l.disable_paste,T=l.assessment,O=l.fav_lang,P=l.fav_lang_ajax_url,w=l.default_template_ajax_url,R=l.LAB_FL,k=l.LAB_FC,I=l.editor_theme,N=l.editor_min_lines,A=l.editor_max_lines,L=l.is_bot_problem,D="sub-editor new-submission-container-"+this.props.private_url_hash;T&&(D+=" assessment-sub-editor"),o&&o.is_full_screen&&(D+=" fullscreen-editor");var x=this.props.sub_data.other_bot_users.map(function(e){return{value:e.id,label:e.name}}),M=this.props.sub_data.current_other_bot_user_id,U=this.props.sub_data.compilation_messages||[];return c.default.createElement("div",{className:D},c.default.createElement(h.CodeEditor,{problem_id:u,problem_slug:d,p_type:p,p_type_verbose:f,private_url_hash:m,langs_info:g,langs_code_ajax_url:b,last_lang:C,is_authenticated:E,disable_paste:S,assessment:T,fav_lang:O,fav_lang_ajax_url:P,default_template_ajax_url:w,LAB_FL:R,LAB_FC:k,editor_theme:I,onClickOnSubmit:this.onClickOnSubmit,editor_min_lines:N,editor_max_lines:A,compilation_errors:U}),c.default.createElement("div",{className:"sub-editor-footer"},[c.default.createElement("div",{className:"autocomplete-suggestion",key:"autocomplete-suggestion"},c.default.createElement("div",{className:"float-right light content autocomplete-text"},c.default.createElement("i",{className:"fa fa-lightbulb-o fa-orange"}),c.default.createElement("span",{className:"livecomplete-lab-flag-react"}," ",y.autoCompleteInfo))),n&&r&&!L?c.default.createElement("div",{className:"custom-input-container",key:"custom-input-container"},c.default.createElement("a",{id:a,className:"provide-custom-input-trigger regular inline-block",onClick:this.swapShowInput},c.default.createElement("i",{className:"fa fa-caret-square-o-"+(t.show_input?"up":"down")})," ",y.provideCustomInput),t.show_input?c.default.createElement("textarea",{className:"custom-input nice-textarea",value:t.input_text,onChange:this.onCustomInputChange}):null):null,n&&!L?c.default.createElement("div",{is:!0,class:"sub-editor-buttons-container","private-url-hash":this.props.private_url_hash,key:"sub-editor-buttons-container"},c.default.createElement("button",{id:i,className:"compile-test-button button btn-blue",key:"compile-test-button",onClick:this.onClickOnCompile}," ",p==v.P_TYPE_SQL?y.compileSubmitForSQL:y.compileSubmit," "),c.default.createElement("button",{id:s,className:"submit-button button btn-green",key:"submit-button",onClick:this.onClickOnSubmit}," ",y.submit," ")):null,n&&L?c.default.createElement("div",{is:!0,class:"sub-editor-buttons-container","private-url-hash":this.props.private_url_hash,key:"sub-editor-buttons-container"},c.default.createElement(_.default,{className:"other-bot-user-select",autosize:!0,options:x,value:M,onChange:this.onOtherBotUserChange}),c.default.createElement("button",{id:s,className:"submit-button button play-game-button "+(null===M?"btn-inactive":"btn-blue"),key:"submit-button",onClick:this.onClickOnSubmit,disabled:null===M}," ",y.playText," ")):null,c.default.createElement("div",{className:"clear",key:"clear1"}),t.fetching_response?c.default.createElement("div",{className:"dots-loader ajax-loader",key:"loader"}):null,t.sub_response?c.default.createElement("div",{className:"standard-margin submission-container",key:"sub-response",ref:"sub_response_container",dangerouslySetInnerHTML:{__html:t.sub_response}}):null,t.log_response?c.default.createElement("div",{className:"standard-margin submission-container",key:"log-response",ref:"log_response_container",dangerouslySetInnerHTML:{__html:t.log_response}}):null,c.default.createElement("div",{className:"clear",key:"clear2"})]))}}]),t}(c.default.PureComponent),C=function(e,t){var o=(0,f.getRoot)(t.p_type,t.problem_id);return{root:o,sub_data:e.sub_editors[o],root_data:e.code_editor.roots[o]}};t.SubEditor=(0,d.connect)(C)(b)},Gh1z:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.P_TYPE_SQL="q",t.TRACELOG_RESULT_DISPLAYED_STATE=120},H2Zf:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){var o=(0,d.createStore)(P,O,w);u.default.render(s.default.createElement(c.Provider,{store:o},s.default.createElement(h.SubEditor,t)),document.getElementById(e))}var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e},i=o("U7vG"),s=n(i),l=o("O27J"),u=n(l),c=o("RH2O"),d=o("2KeS"),p=o("po9w"),_=n(p),h=o("A79w"),f=o("Mlu2"),m=n(f),g=o("Q9e5"),v=n(g),y=o("ncZi"),b=o("zp53"),C=n(b),E=o("XGVg"),S=n(E),T=o("r6Ka"),O=a({},m.default,C.default),P=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,t=arguments[1];return t.type in y.ActionType?a({},e,{code_editor:(0,v.default)(e.code_editor,t)}):t.type in T.ActionType?a({},e,{sub_editors:(0,S.default)(e.sub_editors,t)}):e},w=(0,d.applyMiddleware)(_.default);window.renderSubEditor=r},Mlu2:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={code_editor:{global_conf:{loaded:!1},roots:{}}}},NBbx:function(e,t){e.exports={"sub-editor":"sub-editor","editor-header":"editor-header","mobile-clear":"mobile-clear","editor-settings-button-container":"editor-settings-button-container","editor-settings-button":"editor-settings-button","editor-lang-select":"editor-lang-select","editor-save-trigger":"editor-save-trigger","setting-expand-box":"setting-expand-box","down-arrow":"down-arrow",active:"active","editor-options":"editor-options","editor-divider":"editor-divider","code-editor":"code-editor","ace-crimson-editor":"ace-crimson-editor",ace_gutter:"ace_gutter","ace-monokai":"ace-monokai",ace_editor:"ace_editor","cursor-position":"cursor-position","keybindings-text":"keybindings-text","sub-editor-footer":"sub-editor-footer","sub-editor-buttons-container":"sub-editor-buttons-container","compile-test-button":"compile-test-button","other-bot-user-select":"other-bot-user-select","play-game-button":"play-game-button","custom-input":"custom-input","autocomplete-suggestion":"autocomplete-suggestion","autocomplete-text":"autocomplete-text","sub-editor-credits-footer":"sub-editor-credits-footer","poweredby-text":"poweredby-text","go-full-screen":"go-full-screen","assessment-sub-editor":"assessment-sub-editor","fullscreen-editor":"fullscreen-editor","react-modal-overlay":"react-modal-overlay","react-modal-container":"react-modal-container","small-modal":"small-modal","regular-modal":"regular-modal","large-modal":"large-modal","modal-footer":"modal-footer","modal-content":"modal-content","modal-header":"modal-header","modal-close":"modal-close","fullscreen-problem-description":"fullscreen-problem-description","assessment-problem-description":"assessment-problem-description","flow-help":"flow-help","disable-vertical-scroll":"disable-vertical-scroll","initialize-editor":"initialize-editor"}},Q9e5:function(e,t,o){"use strict";function n(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function r(e,t){switch(t.type){case i.ActionType.INIT_CODE_EDITOR:for(var o=t.root,r=t.data,d=r.langs_info,p={},_=0;_<d.length;_++){p[d[_].id]={source:null,whole_source:null,last_edited:null,cursor_pos:{row:0,col:0},readonly_ranges:[]}}var h=e.global_conf;return e.global_conf.loaded||(h=a({},e.global_conf,{loaded:!0,current_keybindings:(0,c.get_last_keybindings)(),fav_lang:r.fav_lang,current_code_editor_theme:(0,c.get_last_code_editor_theme)()})),a({},e,{global_conf:h,roots:a({},e.roots,n({},o,a({},r,{current_lang:null,lang_source_map:p})))});case i.ActionType.SET_SOURCE_IN_CODE_EDITOR:for(var f=t.root,m=t.data,g=t.animate_save,v=a({},e.roots[f].lang_source_map),y=0;y<m.length;y++){var b=m[y],C=(0,c.getKey)(e.roots[f].private_url_hash,b.lang,"source"),E=(0,c.get_from_local_storage)(C);E&&(b.source=E.source),v[b.lang]=a({},v[b.lang],{source:(0,c.get_source_and_readonly_ranges)(b.source||"",[]),whole_source:b.source||"",last_edited:b.last_edited})}e=a({},e,{roots:a({},e.roots,n({},f,a({},e.roots[f],{lang_source_map:v})))}),e.roots[f].current_lang=(0,c.get_last_lang)(e.roots[f],e.global_conf);var S=e.roots[f];return S.is_authenticated&&(0,s.setUpCodePlayers)(S,g),e;case i.ActionType.CHANGE_SOURCE_IN_CODE_EDITOR:var T=t.root,O=t.source,P=t.delta,w=e.roots[T],R=w.lang_source_map,k=w.current_lang,I=R[k].whole_source,N=(0,c.getSessionId)(w,k);if(R=a({},R,n({},k,a({},R[k],{source:O,whole_source:(0,c.applyReadonlyRangesToSource)(O,(0,l.getOrCreateReadonlyRanges)(N)),last_edited:(new Date).getTime()}))),e=a({},e,{roots:a({},e.roots,n({},T,a({},e.roots[T],{lang_source_map:R})))}),w.is_authenticated){var A=(0,l.getOrCreateReadonlyRanges)(N);(0,s.codePlayerEnqueueChangeset)(N,I,P,(0,c.cloneReadonlyRanges)(A))}else{var L=(0,c.getKey)(w.private_url_hash,k,"delta"),D=(0,c.getKey)(w.private_url_hash,k,"source"),x=(0,c.getKey)(w.private_url_hash,"","lang"),M=(0,c.get_from_local_storage)(L),U={delta:P,source:O,timestamp:(new Date).getTime()};M?M.push(U):M=[U],(0,c.set_to_local_storage)(L,M);var H={source:O,lang:k,last_edited:(new Date).getTime()};(0,c.set_to_local_storage)(D,H),(0,c.set_to_local_storage)(x,k)}return e;case i.ActionType.CHANGE_CURRENT_LANG_IN_CODE_EDITOR:var j=t.root,F=t.lang;return a({},e,{roots:a({},e.roots,n({},j,a({},e.roots[j],{current_lang:F})))});case i.ActionType.CHANGE_CURRENT_KEYBINDINGS:var B=t.keybindings;return(0,c.set_to_local_storage)("keybindings",B),a({},e,{global_conf:a({},e.global_conf,{current_keybindings:B})});case i.ActionType.CHANGE_FAVORITE_LANG_IN_CODE_EDITOR:var G=t.fav_lang;return a({},e,{global_conf:a({},e.global_conf,{fav_lang:G})});case i.ActionType.SET_CURSOR_POSITION:var V=t.root,K=t.row,Q=t.col,z={row:K,col:Q},q=e.roots[V],$=q.current_lang,W=q.lang_source_map;return W=a({},W,n({},$,a({},W[$],{cursor_pos:z}))),a({},e,{roots:a({},e.roots,n({},V,a({},e.roots[V],{lang_source_map:W})))});case i.ActionType.CHANGE_FULL_SCREEN_MODE:var J=t.root,Y=t.is_full_screen;return a({},e,{roots:a({},e.roots,n({},J,a({},e.roots[J],{is_full_screen:Y})))});case i.ActionType.CHANGE_CURRENT_THEME_IN_CODE_EDITOR:var X=t.code_editor_theme;return(0,c.set_to_local_storage)(u.CODE_EDITOR_THEME_TOKEN,X),a({},e,{global_conf:a({},e.global_conf,{current_code_editor_theme:X})})}return e}Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e};t.default=r;var i=o("ncZi"),s=o("2Ipe"),l=o("yqcu"),u=o("yUpC"),c=o("bInE")},WJ9Z:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.CodeEditor=void 0;var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e},l=function(){function e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}(),u=o("vMAF"),c=n(u),d=o("U7vG"),p=n(d),_=o("RH2O"),h=o("cnj4"),f=n(h);o("kX7f"),o("R3yc"),o("y1DZ"),o("eKfU"),o("wnqS"),o("LH9O"),o("MSRa"),o("a80F");var m=o("yUpC"),g=o("s0pV"),v=o("ncZi"),y=o("bInE"),b=o("2Ipe"),C=o("yqcu"),E=o("cuEl"),S=window.CodeEditorText,T=(0,c.default)({FILE_UPLOAD_INIT:null,EDITOR_CODE_PASTE_INIT:null,EDITOR_CODE_PASTE_WAIT:null,EDITOR_CODE_AFTER_PASTE:null}),O=function(e){function t(){r(this,t);var e=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.onSourceChange=e._onSourceChange.bind(e),e.onLangChange=e._onLangChange.bind(e),e.onThemeChange=e._onThemeChange.bind(e),e.onClickOnSave=e._onClickOnSave.bind(e),e.onCut=e._onCut.bind(e),e.onCopy=e._onCopy.bind(e),e.onPaste=e._onPaste.bind(e),e.onEditorCreation=e._onEditorCreation.bind(e),e.onSessionCreation=e._onSessionCreation.bind(e),e.onDocumentCreation=e._onDocumentCreation.bind(e),e.keyboardHandlerFunction=e._keyboardHandlerFunction.bind(e),e.onChangeKeybindingsForNormal=e._onChangeKeybindings.bind(e,null),e.onChangeKeybindingsForVim=e._onChangeKeybindings.bind(e,"vim"),e.onChangeKeybindingsForEmacs=e._onChangeKeybindings.bind(e,"emacs"),e.set_fav_lang=e._set_fav_lang.bind(e),e.set_default_template=e._set_default_template.bind(e),e.toggle_expand_box=e._toggle_expand_box.bind(e),e.onClickOnSettingButton=e._onClickOnSettingButton.bind(e),e.onCursorChange=e._onCursorChange.bind(e),e.onVimModeChange=e._onVimModeChange.bind(e),e.onUnload=e._onUnload.bind(e),e.handleFullScreenClick=e._handleFullScreenClick.bind(e),e.stopPropagationPreventDefault=e._stopPropagationPreventDefault.bind(e),e.aceCommands=[{name:"saveCode",bindKey:{win:"Ctrl-S",mac:"Command-S",sender:"editor|cli"},exec:function(){e.onClickOnSave()}}],e.codefileUpload=e._codefileUpload.bind(e),e.openCodeFile=e._openCodeFile.bind(e),e.onLangChangeOnUpload=e._onLangChangeOnUpload.bind(e),e.codeFileSubmit=e._codeFileSubmit.bind(e),e.codeFileEdit=e._codeFileEdit.bind(e),e.fileUploadModalClose=e._fileUploadModalClose.bind(e),e.state={is_open_expand_box:!1,vim_mode:"normal",file_upload_state:null,code_file:null,code_file_lang:null,show_file_upload_modal:!1,submitCode:!1},e}return i(t,e),l(t,[{key:"_onUnload",value:function(e){var t=this.getCurrentSessionId(),o=(0,b.getCodePlayerForSessionId)(t);o&&o.is_recording_code_player&&(e.returnValue="You may loose all the unsaved changes!")}},{key:"_stopPropagationPreventDefault",value:function(e){e.stopPropagation(),e.preventDefault()}},{key:"componentDidMount",value:function(){var e=this,t=this.props,o=t.root,n=t.problem_id,r=t.problem_slug,a=t.p_type,i=t.p_type_verbose,s=t.private_url_hash,l=t.is_authenticated,u=t.langs_info,c=t.langs_code_ajax_url,d=t.last_lang,p=t.fav_lang,_=t.fav_lang_ajax_url,h=t.default_template_ajax_url,f=t.LAB_FL,m=t.LAB_FC,g=t.root_data;g&&g.is_full_screen&&jQuery(".problem-description").addClass("fullscreen-problem-description");var y=u.map(function(e){return e.id}).join(",");if(this.hasStateInitialized()||this.props.dispatch(v.actions.initCodeEditor(o,{problem_id:n,problem_slug:r,p_type:a,p_type_verbose:i,private_url_hash:s,is_authenticated:l,langs_info:u,last_lang:d,fav_lang:p,fav_lang_ajax_url:_,default_template_ajax_url:h,LAB_FL:f,LAB_FC:m})),this.isSourceLoaded()||jQuery.get(c,{langs:y},function(t){e.props.dispatch(v.actions.setSourceInCodeEditor(o,t.data,e.animateSave.bind(e)))}),document.addEventListener("click",this.toggle_expand_box,!1),window.addEventListener("beforeunload",this.onUnload),this.props.disable_paste){var b="code-editor-"+s,C=document.getElementById(b);C&&(C.addEventListener("copy",this.stopPropagationPreventDefault,!0),C.addEventListener("cut",this.stopPropagationPreventDefault,!0))}}},{key:"componentWillUnmount",value:function(){if(document.removeEventListener("click",this.toggle_expand_box,!1),window.removeEventListener("beforeunload",this.onUnload),this.props.disable_paste){var e="code-editor-"+this.props.private_url_hash,t=document.getElementById(e);t&&(t.removeEventListener("copy",this.stopPropagationPreventDefault),t.removeEventListener("cut",this.stopPropagationPreventDefault))}}},{key:"hasStateInitialized",value:function(){return void 0!==this.props.root_data}},{key:"isSourceLoaded",value:function(){return!!this.hasStateInitialized()&&null!==this.props.root_data.current_lang}},{key:"getCurrentLang",value:function(){return this.hasStateInitialized()?this.props.root_data.current_lang:null}},{key:"getCurrentLangName",value:function(){if(!this.hasStateInitialized())return null;for(var e=this.getCurrentLang(),t=0;t<this.props.langs_info.length;t++)if(this.props.langs_info[t].id==e)return this.props.langs_info[t].name}},{key:"getCurrentSource",value:function(){if(!this.isSourceLoaded())return"";var e=this.props.root_data;return e.lang_source_map[e.current_lang].source}},{key:"getCurrentWholeSource",value:function(){if(!this.isSourceLoaded())return"";var e=this.props.root_data;return e.lang_source_map[e.current_lang].whole_source}},{key:"getCurrentSessionId",value:function(){var e=this.props.root,t=this.getCurrentLang();return t?e+"-"+t:"default"}},{key:"getCurrentKeybindings",value:function(){return this.hasStateInitialized()?this.props.global_conf.current_keybindings:null}},{key:"getCurrentReadonlyRanges",value:function(){return(0,C.getOrCreateReadonlyRanges)(this.getCurrentSessionId())}},{key:"animateSave",value:function(e){var t=jQuery(this.refs.saveLink);!0===e?(t.html(S.savedText),t.css({"background-color":"yellow"}),t.animate({backgroundColor:"#e5e7e8"},1e3,function(){t.css("background-color","rgba(0, 0, 0, 0)")})):t.html(S.errorInSavingText),setTimeout(function(){t.fadeIn().html(S.saveText).fadeIn()},1e3)}},{key:"setUpReadonlyRangesOnDoc",value:function(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.start=e.createAnchor(n.start),n.end=e.createAnchor(n.end),n.end.$insertRight=!0}}},{key:"setUpReadonlyRangesOnSession",value:function(e,t){for(var o=0;o<t.length;o++){var n=t[o];e.addMarker(n,"ace-readonly-highlight")}}},{key:"does_selection_intersect",value:function(e,t){for(var o=this.refs.ace_editor.getSelectionRange(),n=0;n<e.length;n++){var r=e[n];if((t||o.start.row!=r.end.row||o.start.column!=r.end.column)&&o.intersects(r))return!0}return!1}},{key:"getCursorPosition",value:function(){if(this.isSourceLoaded()){var e=this.props.root_data;return e.lang_source_map[e.current_lang].cursor_pos}return{col:0,row:0}}},{key:"getCurrentTheme",value:function(){return this.props.global_conf.current_code_editor_theme||this.props.editor_theme||m.DEFAULT_CODE_EDITOR_THEME}},{key:"_onSourceChange",value:function(e,t){this.props.dispatch(v.actions.changeSourceInCodeEditor(this.props.root,e,t))}},{key:"_onLangChange",value:function(e){var t=e.target.value;this.props.dispatch(v.actions.changeCurrentLangInCodeEditor(this.props.root,t))}},{key:"_onThemeChange",value:function(e){this.setState({is_open_expand_box:!1}),this.refs.ace_editor.focus(),this.props.dispatch(v.actions.changeCurrentThemeInCodeEditor(this.props.root,e))}},{key:"_onCursorChange",value:function(e,t){this.props.dispatch(v.actions.setCursorPosition(this.props.root,e,t))}},{key:"_onVimModeChange",value:function(e){this.setState({vim_mode:e})}},{key:"_onClickOnSave",value:function(){if(this.isSourceLoaded()){var e=this.getCurrentSessionId();(0,b.codePlayerFinishRecording)(e)||this.animateSave(!0)}}},{key:"_onCut",value:function(){if(this.props.disable_paste)return!1;var e=this.getCurrentReadonlyRanges();return!this.does_selection_intersect(e,!1)}},{key:"_onCopy",value:function(){if(this.props.disable_paste)return!1;var e=this.getCurrentReadonlyRanges();return!this.does_selection_intersect(e,!1)}},{key:"_onPaste",value:function(){if(this.props.disable_paste)return!1;var e=this.getCurrentReadonlyRanges();return!this.does_selection_intersect(e,!1)}},{key:"_onEditorCreation",value:function(e){for(var t=["overwrite","removeline","duplicateSelection","togglecomment","toggleBlockComment","modifyNumberUp","modifyNumberDown","replace","copylinesup","movelinesup","copylinesdown","movelinesdown","del","backspace","cut_or_delete","removetolinestart","removetolineend","removewordleft","removewordright","indent","blockoutdent","blockindent","transposeletters","tolowercase","touppercase","splitIntoLines"],o=this,n=0;n<t.length;n++){var r=t[n],a=e.commands.byName[r];!function(t){e.commands.addCommand({name:t.name,bindKey:t.bindKey,exec:function(e){if(!o.does_selection_intersect(o.getCurrentReadonlyRanges(),!0)&&("del"!=t.name||o.can_delete(!1,!1)))return t.exec.call(this,e)}})}(a)}}},{key:"can_delete",value:function(e,t){var o=this.refs.ace_editor.editor.getSelectionRange(),n=o.end.row,r=o.end.column,a=this.refs.ace_editor.editor.getSession().getValue().split("\n");if(/^\r?$/.test(a[n].slice(r))||e)for(var i=this.getCurrentReadonlyRanges(),s=0;s<i.length;s++){var l=i[s];if(!t&&l.start.row==n+1)return!1;if(t&&l.end.row==n){if(n+1==a.length)return!1;if(i.some(function(e){return e.start.row==n+1}))return!1}}return!0}},{key:"_onDocumentCreation",value:function(e,t){this.setUpReadonlyRangesOnDoc(t,(0,C.getOrCreateReadonlyRanges)(e))}},{key:"_onSessionCreation",value:function(e,t){this.setUpReadonlyRangesOnSession(t,(0,C.getOrCreateReadonlyRanges)(e));var o=e.split("-");if(o.length>1){var n=o[o.length-1];t.lang=n}}},{key:"_keyboardHandlerFunction",value:function(e,t,o,n){if("vim"==this.getCurrentKeybindings()&&"insert"!=this.state.vim_mode){var r=String.fromCharCode(n);return("normal"==this.state.vim_mode&&"d"==r||"D"==r)&&!(!this.does_selection_intersect(this.getCurrentReadonlyRanges(),!1)&&this.can_delete(!0,!0))&&{command:"null",passEvent:!1}}return!(-1===t||n<=40&&n>=37)&&(this.does_selection_intersect(this.getCurrentReadonlyRanges(),!1)?{command:"null",passEvent:!1}:void 0)}},{key:"_onClickOnSettingButton",value:function(e){this.state.is_open_expand_box||(e.stopPropagation(),e.nativeEvent.stopImmediatePropagation(),this.setState({is_open_expand_box:!0}))}},{key:"_toggle_expand_box",value:function(e){this.state.is_open_expand_box&&!jQuery.contains(this.refs.expand_box,e.target)&&this.setState({is_open_expand_box:!1})}},{key:"_onChangeKeybindings",value:function(e){this.props.dispatch(v.actions.changeCurrentKeybindings(this.props.root,e)),this.setState({is_open_expand_box:!1}),this.refs.ace_editor.focus(),this.setState({vim_mode:"normal"})}},{key:"_set_fav_lang",value:function(){var e=this,t=this.getCurrentLangName();jQuery.ajax({type:"POST",url:this.props.fav_lang_ajax_url,data:{lang:t}}).done(function(o){"OK"==o.status&&(window.addAlert(o.message),e.props.dispatch(v.actions.changeFavoriteLang(e.props.root,t)))}),this.setState({is_open_expand_box:!1})}},{key:"_set_default_template",value:function(){var e={code:this.getCurrentSource(),lang:this.getCurrentLang(),confirm:"confirm"};jQuery.ajax({type:"POST",url:this.props.default_template_ajax_url,data:e}).done(function(e){"confirm"==e.status?this.refs.confirm_set_favorite_code.click():"OK"==e.status&&window.addAlert(e.message)}),this.setState({is_open_expand_box:!1})}},{key:"_change_vim_mode",value:function(){}},{key:"componentDidUpdate",value:function(){switch(this.state.file_upload_state){case T.FILE_UPLOAD_INIT:this.state.code_file||this.setFileInState();break;case T.EDITOR_CODE_PASTE_INIT:this.setCodeInEditor();break;case T.EDITOR_CODE_AFTER_PASTE:this.afterCodePaste()}return!0}},{key:"_openCodeFile",value:function(){if(this.props.is_authenticated){if(!this.isSourceLoaded())return;this.refs.codeFile.click()}else(0,y.showLoginModal)()}},{key:"_codefileUpload",value:function(){this.setState({file_upload_state:T.FILE_UPLOAD_INIT,show_file_upload_modal:!0,code_file_lang:this.getCurrentLang()})}},{key:"_onLangChangeOnUpload",value:function(e){var t=e.target.value;return this.setState({code_file_lang:t}),!0}},{key:"_codeFileEdit",value:function(){this.setState({file_upload_state:T.EDITOR_CODE_PASTE_INIT})}},{key:"_codeFileSubmit",value:function(){this.setState({file_upload_state:T.EDITOR_CODE_PASTE_INIT,submitCode:!0})}},{key:"setFileInState",value:function(){var e=this.refs.codeFile,t=e.files[0],o=(0,y.getLangForFilePath)(t.name);return o&&(0,y.isLangAllowed)(o,this.props.root_data.langs_info)||(o=this.getCurrentLang()),this.setState({code_file:t,code_file_lang:o}),!0}},{key:"setCodeInEditor",value:function(){var e=this;this.props.dispatch(v.actions.changeCurrentLangInCodeEditor(this.props.root,this.state.code_file_lang));var t="",o=new FileReader;o.onload=function(){t=o.result,e.refs.ace_editor.setValue(t),e.setState({file_upload_state:T.EDITOR_CODE_AFTER_PASTE})},o.readAsText(this.state.code_file),this.setState({file_upload_state:T.EDITOR_CODE_PASTE_WAIT})}},{key:"afterCodePaste",value:function(){this.state.submitCode&&this.props.onClickOnSubmit(),this.fileUploadModalClose()}},{key:"_fileUploadModalClose",value:function(){this.refs.codeFile.value="",this.setState({file_upload_state:null,code_file:null,code_file_lang:null,show_file_upload_modal:!1,submitCode:!1})}},{key:"_handleFullScreenClick",value:function(){var e=this.props.root_data;e&&e.is_full_screen?this._restore():this._fullScreen(),this.props.dispatch(v.actions.toggleFullScreenMode(this.props.root,!e.is_full_screen)),this.setState({is_open_expand_box:!1})}},{key:"_fullScreen",value:function(){var e=this.props.assessment,t=this;jQuery("body").addClass("disable-vertical-scroll"),jQuery(".problem-description").addClass("fullscreen-problem-description"),jQuery("#fullscreen-problem-title").removeClass("hidden"),jQuery(window).resize(function(){e&&jQuery(".assessment-sub-editor").hasClass("fullscreen-editor")&&t._handleAssessmentEditorHeight(!1)}),e&&t._handleAssessmentEditorHeight(!1),f.default.unbind("backspace"),f.default.on("backspace",null,function(){"TEXTAREA"!==document.activeElement.tagName&&t.handleFullScreenClick()}),"undefined"!=typeof isDocumentInFullscreen&&isDocumentInFullscreen()?f.default.unbind("esc"):f.default.on("esc",null,function(){t.handleFullScreenClick()})}},{key:"_restore",value:function(){var e=this.props.assessment;jQuery("body").removeClass("disable-vertical-scroll"),jQuery(".problem-description").removeClass("fullscreen-problem-description"),jQuery("#fullscreen-problem-title").addClass("hidden"),e&&this._handleAssessmentEditorHeight(!0),f.default.unbind("backspace"),f.default.unbind("esc")}},{key:"_handleAssessmentEditorHeight",value:function(e){if(e)jQuery(".assessment-sub-editor").css("height",""),jQuery(".assessment-problem-description").css("height","");else{var t=jQuery(window).height()-jQuery(".header").outerHeight();jQuery(".assessment-sub-editor").css("height",t),jQuery(".assessment-problem-description").css("height",t)}}},{key:"render",value:function(){var e=this,t=this.props,o=t.langs_info,n=t.LAB_FL,r=t.LAB_FC,a=t.assessment,i=t.root_data,l=t.compilation_errors,u=this.isSourceLoaded(),c=this.getCurrentLang(),d=this.getCurrentLangName(),_=this.getCurrentSessionId(),h=this.getCurrentKeybindings(),f=this.getCursorPosition(),v=this.state.code_file_lang,b=this.getCurrentTheme(),T="";"insert"==this.state.vim_mode&&(T=" (Insert)");var O="setting-expand-box less-margin "+(this.state.is_open_expand_box?"block":"hidden"),P=null;r&&!a&&(P=p.default.createElement("a",{className:"set-favorite-code",onClick:this.set_default_template},p.default.createElement("li",null,S.setDefaultTemplateText)));var w=null;n&&(w=p.default.createElement("a",{className:"set-favorite-lang",onClick:this.set_fav_lang},p.default.createElement("li",null,S.setFavoriteLangText.format(d))));var R=[],k=this.getCurrentSource();if(u){var I={};if(R=(0,C.getOrCreateReadonlyRanges)(_,I),I.created){var N=this.getCurrentWholeSource();k=(0,y.get_source_and_readonly_ranges)(N,R)}}var A="fa fa-expand",L=S.goFullScreen;i&&i.is_full_screen&&(A="fa fa-compress",L=S.exitFullScreen);var D="code-editor-"+this.props.private_url_hash,x="editor-lang-select-"+this.props.private_url_hash,M="editor-save-trigger-"+this.props.private_url_hash,U=[];for(var H in l){var j=l[H];U.push(s({},j,{type:"error"}))}return p.default.createElement("div",{id:D,className:"code-editor"},p.default.createElement("div",{className:"editor-header"},a?null:p.default.createElement("span",{className:"file-upload-text light regular",dangerouslySetInnerHTML:{__html:S.writeOrUploadCode},onClick:this.openCodeFile}),p.default.createElement("div",{className:"hidden"},p.default.createElement("input",{type:"file",id:"codeFile",ref:"codeFile",onChange:this.codefileUpload,readOnly:!u})),p.default.createElement("div",{className:this.state.show_file_upload_modal?"":"hidden"},p.default.createElement("div",{className:"react-modal-overlay"},p.default.createElement("div",{className:"react-modal-container small-modal"},p.default.createElement("a",{className:"modal-close no-underline",title:"Close",onClick:this.fileUploadModalClose}),p.default.createElement("div",{className:"modal-header"},p.default.createElement("h4",{className:"dark large less-margin"},S.selectLanguageText)),p.default.createElement("hr",{className:"hr"}),p.default.createElement("div",{className:"modal-content"},p.default.createElement("div",{className:"light regular less-margin"},S.helpText),p.default.createElement("select",{className:" float-left nice-select",value:v||"lang",onChange:this.onLangChangeOnUpload.bind(this)},u?o.map(function(e){return p.default.createElement("option",{value:e.id,key:e.id},e.versioned_name)}):[p.default.createElement("option",{value:"lang",key:"lang"},S.SelectLanguage)])),p.default.createElement("div",{className:"modal-footer"},p.default.createElement("a",{className:"button btn-blue float-right close-modal-window edit-code",onClick:this.codeFileEdit.bind(this)},S.editText),p.default.createElement("a",{className:"float-right button btn-blue close-modal-window submit-code medium-margin-right",onClick:this.codeFileSubmit.bind(this)},S.submitText),p.default.createElement("div",{className:"clear"}))))),p.default.createElement("div",{className:"mobile-clear"}),p.default.createElement("div",{className:"editor-settings-button-container float-right"},p.default.createElement("div",{className:"editor-settings-button",onClick:this.onClickOnSettingButton},p.default.createElement("i",{className:"fa fa-cog"})),p.default.createElement("div",{className:"clear"}),p.default.createElement("div",{className:O,ref:"expand_box"},p.default.createElement("div",{className:"down-arrow"}),p.default.createElement("ul",{className:"no-margin"},p.default.createElement("div",{className:"medium-margin-left editor-options"},p.default.createElement("p",{className:"smaller weight-600 no-margin"},S.themeHeader),m.THEME_MAP.map(function(t,o){return p.default.createElement("a",{key:o,className:"float-left width-100 small"+(b==t.value?" active":""),onClick:e.onThemeChange.bind(null,t.value)},p.default.createElement("i",{className:"fa"+(b==t.value?" fa-dot-circle-o":" fa-circle-o"),"aria-hidden":"true"}),p.default.createElement("span",{className:"less-margin-left"},t.name))}),p.default.createElement("div",{className:"clear"})),p.default.createElement("div",{className:"editor-divider"}),p.default.createElement("div",{className:"medium-margin-left editor-options"},p.default.createElement("p",{className:"smaller weight-600 no-margin"},S.editorThemeHeader),p.default.createElement("a",{className:"float-left width-100 small"+(h?"":" active"),onClick:this.onChangeKeybindingsForNormal},p.default.createElement("i",{className:"fa"+(h?" fa-circle-o":" fa-dot-circle-o"),"aria-hidden":"true"}),p.default.createElement("span",{className:"less-margin-left"},S.keybindingNormal)),p.default.createElement("a",{className:"float-left width-100 small"+("vim"==h?" active":""),onClick:this.onChangeKeybindingsForVim},p.default.createElement("i",{className:"fa"+("vim"==h?" fa-dot-circle-o":" fa-circle-o"),"aria-hidden":"true"}),p.default.createElement("span",{className:"less-margin-left"},S.keybindingVim)),p.default.createElement("a",{className:"float-left width-100 small"+("emacs"==h?" active":""),onClick:this.onChangeKeybindingsForEmacs},p.default.createElement("i",{className:"fa"+("emacs"==h?" fa-dot-circle-o":" fa-circle-o"),"aria-hidden":"true"}),p.default.createElement("span",{className:"less-margin-left"},S.keybindingEmacs)),p.default.createElement("div",{className:"clear"})),p.default.createElement("div",{className:"editor-divider"}),w,P))),p.default.createElement("a",{id:"confirm-set-favorite-code",className:"show-modal hidden",target:"confirm-set-favorite-code-modal",ref:"confirm_set_favorite_code"}),p.default.createElement("div",{id:"confirm-set-favorite-code-modal",className:"modal-window small-modal"},p.default.createElement("div",{className:"modal-header"},S.updateDefaultTemplate),p.default.createElement("div",{className:"modal-content"},p.default.createElement("div",{className:"dark regular"},S.overWriteExistingTemplate)),p.default.createElement("div",{className:"modal-footer"},p.default.createElement("a",{href:"#",className:"link-3 float-left close-modal-window link-near-button"},S.takeMeBack),p.default.createElement("a",{className:"float-right button btn-blue close-modal-window set-favorite-code",id:"set-favorite-code",onClick:this.set_default_template.bind(this)},S.yes),p.default.createElement("div",{className:"clear"}))),p.default.createElement("a",{className:"go-full-screen editor-settings-button float-right less-margin-left",title:L,onClick:this.handleFullScreenClick},p.default.createElement("i",{className:A})),p.default.createElement("select",{id:x,className:"editor-lang-select nice-select",value:c||"lang",onChange:this.onLangChange},u?o.map(function(e){return p.default.createElement("option",{value:e.id,key:e.id},e.versioned_name)}):[p.default.createElement("option",{value:"lang",key:"lang"},S.selectLanguage)]),p.default.createElement("a",{id:M,className:"editor-save-trigger float-right regular",ref:"saveLink",onClick:this.onClickOnSave},S.save)),p.default.createElement(g.AceEditor,{annotations:U,mode:c?m.LANG_MODE_MAP[c]:"",theme:b,name:"code-ace-editor",ref:"ace_editor",keyboardHandler:this.getCurrentKeybindings(),sessionId:_,value:u?k:S.loading+"...",onChange:this.onSourceChange,commands:this.aceCommands,width:"100%",showPrintMargin:!1,highlightActiveLine:!0,enableBasicAutocompletion:!0,enableLiveAutocompletion:!!a,completer:c?(0,E.getCompleter)(c):null,tabSize:4,fontSize:15,showGutter:!0,readOnly:!u,onCut:this.onCut,onCopy:this.onCopy,onPaste:this.onPaste,onEditorCreation:this.onEditorCreation,onDocumentCreation:this.onDocumentCreation,onSessionCreation:this.onSessionCreation,keyboardHandlerFunction:this.keyboardHandlerFunction,minLines:this.props.editor_min_lines||25,maxLines:this.props.editor_max_lines||40,onCursorChange:this.onCursorChange,onVimModeChange:this.onVimModeChange,setOptions:{dragEnabled:!1}}),p.default.createElement("div",{className:"cursor-position light"},f.row+1,":",f.col+1),h?p.default.createElement("div",{className:"keybindings-text"},p.default.createElement("span",null,h+T)):null)}}]),t}(p.default.PureComponent);t.CodeEditor=(0,_.connect)(function(e,t){var o=t.p_type,n=t.problem_id,r=(0,y.getRoot)(o,n);return{global_conf:e.code_editor.global_conf,root:r,root_data:e.code_editor.roots[r]}})(O)},XGVg:function(e,t,o){"use strict";function n(e){if(Array.isArray(e)){for(var t=0,o=Array(e.length);t<e.length;t++)o[t]=e[t];return o}return Array.from(e)}function r(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function a(e,t){switch(t.type){case s.ActionType.INIT_SUB_EDITOR:var o=t.root;return i({},e,r({},o,{show_input:!1,input_text:"",current_other_bot_user_id:-1,other_bot_users:[{id:-1,name:u.defaultBot}],fetching_response:!1,log_response:null,sub_response:null}));case s.ActionType.SUB_EDITOR_SWAP_SHOW_INPUT:var a=t.root;return i({},e,r({},a,i({},e[a],{show_input:!e[a].show_input})));case s.ActionType.SUB_EDITOR_CUTSOM_INPUT_CHANGE:var c=t.root,d=t.value;return i({},e,r({},c,i({},e[c],{input_text:d})));case s.ActionType.SUB_EDITOR_OTHER_BOT_USER_ID_CHANGE:var p=t.root,_=t.user_id;return i({},e,r({},p,i({},e[p],{current_other_bot_user_id:_})));case s.ActionType.SUB_EDITOR_OTHER_BOT_USERS_UPDATE:var h=t.root,f=t.other_bot_users;return i({},e,r({},h,i({},e[h],{other_bot_users:[{id:-1,name:u.defaultBot}].concat(n(f))})));case s.ActionType.SUB_EDITOR_FETCH_RESPONSE:var m=t.root,g=t.is_log;return i({},e,r({},m,i({},e[m],{show_input:!!g&&e[m].show_input,compilation_messsages:[],fetching_response:!0,log_response:null,sub_response:null})));case s.ActionType.SUB_EDITOR_FETCH_RESPONSE_SUCCESS:var v=t.root,y=t.html,b=t.is_log;return i({},e,r({},v,i({},e[v],{fetching_response:!1,log_response:b?y:e[v].log_response,sub_response:b?e[v].sub_response:y})));case s.ActionType.SUB_EDITOR_UPDATE_COMPILATION_MESSAGE:var C=t.root,E=t.html,S=t.language,T=(0,l.getCompilationErrors)(E,S);return i({},e,r({},C,i({},e[C],{compilation_messages:T})))}return e}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e};t.default=a;var s=o("r6Ka"),l=o("d6GN"),u=window.CodeEditorText},a80F:function(e,t,o){"use strict";o("V+73"),o("2qnb"),o("xCI4"),o("QoCx"),o("1z0e"),o("GEW4"),o("7voC"),o("EzsT"),o("mMMU"),o("hCU/"),o("33AR"),o("h636"),o("DPpf"),o("Wv+O"),o("y1CR"),o("EFXh"),o("0T25"),o("UBkM"),o("ek6K"),o("2i/5"),o("BR1z"),o("zfZq"),o("7H3A"),o("OQLN"),o("xf9h"),o("orD9"),o("Ejne"),o("p4x1"),o("1w4w"),o("fGMu"),o("lqDo"),o("78pI")},bInE:function(e,t,o){"use strict";function n(e){if(localStorage){var t=localStorage.getItem(e);if(null!==t&&"undefined"!==t){return JSON.parse(t)}}return null}function r(e,t){if(localStorage){var o=JSON.stringify(t);return localStorage.setItem(e,o),!0}return!1}function a(e){return!!localStorage&&(localStorage.removeItem(e),!0)}function i(e,t){var o=e.private_url_hash,r=e.is_authenticated,i=g(o,"","lang"),s=n(i);if(s)return r&&a(i),s;if(e.last_lang)return e.last_lang;for(var l=null,u=0;u<e.langs_info.length;u++){var c=e.langs_info[u].id,d=e.lang_source_map[c].last_edited;d&&(null===l||d>l)&&(l=d,s=c)}return s||(t.fav_lang&&h(t.fav_lang,e.langs_info)?t.fav_lang:e.langs_info.length>0?e.langs_info[0].id:null)}function s(e,t){return e+"-"+t}function l(){return n("keybindings")?n("keybindings"):null}function u(e,t){return s(e.p_type,e.problem_id)+"-"+t}function c(e){return e.lang_source_map[e.current_lang]}function d(e,t){for(var o="",n=e.split("\n"),r=!1,a=null,i=0,s=0;s<n.length;s++){var l=n[s];if(/^<readonly>/.test(l))r=!0,a=i;else if(/^<\/readonly>/.test(l)&&r){var u=new T(a,0,i,0);t.push(u),r=!1}else o+=l,s!=n.length-1&&(o+="\n"),i+=1}return o=o.replace(/\r/g,"")}function p(e,t){for(var o="",n={},r=0;r<t.length;r++)n[t[r].start.row]="start",n[t[r].end.row]="end";for(var a=e.split("\n"),i=0;i<a.length;i++){var s=a[i];i in n&&("start"==n[i]?o+="<readonly>\n":(o+="</readonly>",i==a.length-1&&/^\r?$/.test(s)||(o+="\n"))),o+=s,i!=a.length-1&&(o+="\n")}return o}function _(e){return e.map(function(e){return e.clone()})}function h(e,t){return t.some(function(t){return t.id==e})}function f(e){var t=e.split(".");return t.length>1?t.pop():null}function m(e){var t=f(e);return t&&t in E.EXTENSION_TO_LANG_MAP?E.EXTENSION_TO_LANG_MAP[t]:null}function g(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n="";return"delta"==o?n=e+"_delta_"+t:"source"==o?n=e+"_"+t:"lang"==o&&(n=e+"_last_lang"),n}function v(){return jQuery("#login-modal").show(),jQuery("#login-modal").modal({onClose:function(e){e.data.fadeOut(300),e.container.fadeOut(300,function(){e.overlay.hide(),jQuery.modal.close(),jQuery(".modal-window").hide()})},onOpen:function(e){e.overlay.fadeIn(300),e.data.show(),e.container.fadeIn(300)}}),!1}function y(){var e=n(E.CODE_EDITOR_THEME_TOKEN),t=!1;return e&&(t=E.THEME_MAP.some(function(t){return t.value===e})),t?e:null}Object.defineProperty(t,"__esModule",{value:!0}),t.get_from_local_storage=n,t.set_to_local_storage=r,t.remove_from_local_storage=a,t.get_last_lang=i,t.getRoot=s,t.get_last_keybindings=l,t.getSessionId=u,t.getSourceData=c,t.get_source_and_readonly_ranges=d,t.applyReadonlyRangesToSource=p,t.cloneReadonlyRanges=_,t.isLangAllowed=h,t.getExtension=f,t.getLangForFilePath=m,t.getKey=g,t.showLoginModal=v,t.get_last_code_editor_theme=y;var b=o("kX7f"),C=function(e){return e&&e.__esModule?e:{default:e}}(b),E=o("yUpC"),S=C.default.acequire("ace/range"),T=S.Range;window.get_source_and_readonly_ranges=d,window.applyReadonlyRangesToSource=p},cuEl:function(e,t,o){"use strict";function n(e){return C[e]||null}Object.defineProperty(t,"__esModule",{value:!0}),t.getCompleter=n;var r=o("1hYb"),a=o("DX2b"),i=o("UqqS"),s=o("DV9t"),l=o("WPdo"),u=o("hWNS"),c=o("RbMe"),d=o("Hg6N"),p=o("FHh8"),_=o("23X7"),h=o("pf4S"),f=o("BeQ+"),m=o("acbj"),g=o("LMZ2"),v=o("U8Sy"),y=o("ITpG"),b=o("HeRc"),C={C:r.c_completer,CPP:i.cpp_completer,CPP11:i.cpp_completer,CPP14:i.cpp_completer,PYTHON:m.python_completer,PERL:h.perl_completer,PASCAL:_.pascal_completer,JAVA:c.java_completer,JAVA8:c.java_completer,RUBY:v.ruby_completer,GO:l.go_completer,PHP:f.php_completer,CSHARP:s.csharp_completer,LISP:d.lisp_completer,R:g.r_completer,RUST:y.rust_completer,HASKELL:u.haskell_completer,SCALA:b.scala_completer,OBJECTIVEC:p.objectivec_completer,CLOJURE:a.clojure_completer}},d6GN:function(e,t,o){"use strict";function n(e){var t=jQuery("<div/>").html(e),o=t.find("[replaceData=true]");return!(t.find("[replaceData=false]").length>0&&0===o.length||(o.length,0))}function r(e){if(!e)return"";switch(e){case"C":case"CPP":case"CPP14":return/(\d+):\d+: error:(.*)/;case"CSHARP":return/\.cs\((\d+),\d+\): error (.*)/;case"D":return/\.d\((\d+)\): Error: (.*)/;case"ERLANG":return/\.erl:(\d+): (.*)/;case"FSHARP":return/\.fs\((\d+),\d+\): error(.*)/;case"GO":return/\.go:(\d+): (.*)/;case"HASKELL":return/\.hs:(\d+):\d+:(.*)/;case"JAVA":case"JAVA8":return/(\d+): error: (.*)/;case"KOTLIN":return/\.kt:(\d+):\d+: error:(.*)/;case"LISP":return/Error: \(line (\d+)\) (.*)/;case"OBJECTIVEC":return/(\d+):\d+: error: (.*)/;case"OCAML":return/\.ml", line (\d+), characters \d+-\d+:\s*Error:(.*)/;case"PASCAL":return/\.pas\((\d+),\d+\) (.*)/;case"PERL":return/(.+) at .+ line (\d+)/;case"PHP":return/PHP Parse error: (.+) in .+ on line (\d+)/;case"PYTHON":return/\.py", line (\d+)(.*)/;case"PYTHON3":return/\.py3", line (\d+)(.*)/;case"RUBY":return/\.rb:(\d+):(.*)/;case"RUST":return/error: (.+) --> .*\.rs:(\d+):\d+/;case"SCALA":return/\.scala:(\d+): error: (.*)/;case"SWIFT":return/\.swift:(\d+):\d+: error:(.*)/;case"VB":return/\.vb \((\d+),\d+\)\s*:\s*error\s*(.*)/}}function a(e,t){var o=i(e);if(o&&o.length>0)return o;var n=[],a="";if(!e||!t)return n;var s=jQuery("<div/>").html(e),l=s.find(".compile-error-message");if(l.length>0&&(a=l[0].innerText),!a)return n;var u=r(t);if(!u)return n;a=a.replace(/[\r\n]/g,"");var c=u.exec(a);if(!c)return n;var d={PERL:null,PHP:null,RUST:null},p=void 0,_=void 0;t in d?(p=2,_=1):(p=1,_=2);var h=c[_],f=h.length;if(f>70){var m=void 0,g=void 0;for(g=70,m=1;g<f&&m<=5;g+=70,m++)f=h.length,h=[h.slice(0,g),h.slice(g,f)].join("\n");h=h.slice(0,g)}return c&&c.length>0&&n.push({row:Number(c[p])-1,column:1,text:h}),n}function i(e){var t=[];if(!e)return t;var o=jQuery("<div/>").html(e),n=o.find(".exception-json"),r=null;if(n.length>0&&(r=n[0].innerText),!r)return t;var a=JSON.parse(r);if(!a.exception_name)return t;var i=a.line_number?a.line_number:0,s=a.exception_name?a.exception_name:"";return s+=a.exception_message?" : "+a.exception_message:"",t.push({row:i-1,column:1,text:s}),t}function s(e,t){var o="/AJAX/tracelog/submission/{0}/state/{1}/".format(e,t);jQuery.post(o,function(e){})}Object.defineProperty(t,"__esModule",{value:!0}),t.shouldPoll=n,t.getCompilationErrors=a,t.getRuntimeErrors=i,t.log_submission_state=s},ncZi:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.actions=t.ActionType=void 0;var n=o("vMAF"),r=function(e){return e&&e.__esModule?e:{default:e}}(n),a=t.ActionType=(0,r.default)({INIT_CODE_EDITOR:null,SET_SOURCE_IN_CODE_EDITOR:null,CHANGE_SOURCE_IN_CODE_EDITOR:null,CHANGE_CURRENT_LANG_IN_CODE_EDITOR:null,CHANGE_CURRENT_KEYBINDINGS:null,CHANGE_FAVORITE_LANG_IN_CODE_EDITOR:null,SET_CURSOR_POSITION:null,CHANGE_FULL_SCREEN_MODE:null,CHANGE_CURRENT_THEME_IN_CODE_EDITOR:null});t.actions={initCodeEditor:function(e,t){return{type:a.INIT_CODE_EDITOR,root:e,data:t}},setSourceInCodeEditor:function(e,t,o){return{type:a.SET_SOURCE_IN_CODE_EDITOR,root:e,data:t,animate_save:o}},changeSourceInCodeEditor:function(e,t,o){return{type:a.CHANGE_SOURCE_IN_CODE_EDITOR,root:e,source:t,delta:o}},changeCurrentLangInCodeEditor:function(e,t){return{type:a.CHANGE_CURRENT_LANG_IN_CODE_EDITOR,root:e,lang:t}},changeCurrentKeybindings:function(e,t){return{type:a.CHANGE_CURRENT_KEYBINDINGS,root:e,keybindings:t}},changeFavoriteLang:function(e,t){return{type:a.CHANGE_FAVORITE_LANG_IN_CODE_EDITOR,root:e,fav_lang:t}},setCursorPosition:function(e,t,o){return{type:a.SET_CURSOR_POSITION,root:e,row:t,col:o}},toggleFullScreenMode:function(e,t){return{type:a.CHANGE_FULL_SCREEN_MODE,root:e,is_full_screen:t}},changeCurrentThemeInCodeEditor:function(e,t){return{type:a.CHANGE_CURRENT_THEME_IN_CODE_EDITOR,root:e,code_editor_theme:t}}}},r6Ka:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.actions=t.ActionType=void 0;var n=o("vMAF"),r=function(e){return e&&e.__esModule?e:{default:e}}(n),a=t.ActionType=(0,r.default)({INIT_SUB_EDITOR:null,SUB_EDITOR_SWAP_SHOW_INPUT:null,SUB_EDITOR_CUTSOM_INPUT_CHANGE:null,SUB_EDITOR_OTHER_BOT_USER_ID_CHANGE:null,SUB_EDITOR_OTHER_BOT_USERS_UPDATE:null,SUB_EDITOR_FETCH_RESPONSE:null,SUB_EDITOR_FETCH_RESPONSE_SUCCESS:null,SUB_EDITOR_UPDATE_COMPILATION_MESSAGE:null});t.actions={initSubEditor:function(e){return{type:a.INIT_SUB_EDITOR,root:e}},swapShowInput:function(e){return{type:a.SUB_EDITOR_SWAP_SHOW_INPUT,root:e}},customInputChange:function(e,t){return{type:a.SUB_EDITOR_CUTSOM_INPUT_CHANGE,root:e,value:t}},otherBotUserIdChange:function(e,t){return{type:a.SUB_EDITOR_OTHER_BOT_USER_ID_CHANGE,root:e,user_id:t}},updateOtherBotUsers:function(e,t){return{type:a.SUB_EDITOR_OTHER_BOT_USERS_UPDATE,root:e,other_bot_users:t}},fetchResponse:function(e,t){return{type:a.SUB_EDITOR_FETCH_RESPONSE,root:e,is_log:t}},fetchResponseSuccess:function(e,t,o){return{type:a.SUB_EDITOR_FETCH_RESPONSE_SUCCESS,root:e,html:t,is_log:o}},updateCompilationMessage:function(e,t,o){return{type:a.SUB_EDITOR_UPDATE_COMPILATION_MESSAGE,root:e,html:t,language:o}}}},s0pV:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e,t){return e*Math.pow(2,t)}function l(e,t){var o=2147483648;return(~~(e/o)&~~(t/o))*o+(2147483647&e&t)}function u(e,t){var o=2147483648;return(~~(e/o)|~~(t/o))*o+(2147483647&e|2147483647&t)}function c(e,t,o,n){if(e in window.editorSessions)return n.created=!1,window.editorSessions[e];var r=f.default.createEditSession(t(),o?"ace/mode/"+o:void 0);return window.editorSessions[e]=r,n.created=!0,r}function d(e,t,o){var n=e[t];return e[t]=function(){var t=Array.prototype.slice.call(arguments);return o.call(this,function(){return n.apply(e,t)},t)},e[t]}Object.defineProperty(t,"__esModule",{value:!0}),t.AceEditor=void 0;var p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e},_=function(){function e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}(),h=o("kX7f"),f=n(h);o("R3yc");var m=o("U7vG"),g=n(m),v=o("2iM5"),y=n(v),b=f.default.acequire("ace/range"),C=b.Range,E=f.default.acequire("ace/keyboard/hash_handler"),S=E.HashHandler,T=f.default.acequire("ace/document"),O=T.Document,P=f.default.acequire("ace/keyboard/keybinding"),w=P.KeyBinding,R=f.default.acequire("ace/ext/language_tools"),k=R.addCompleter,I=f.default.acequire("ace/autocomplete/util"),N=f.default.acequire("ace/autocomplete"),A=f.default.acequire("ace/virtual_renderer").VirtualRenderer,L=f.default.acequire("ace/editor").Editor,D=f.default.acequire("ace/lib/event"),x=f.default.acequire("ace/lib/lang"),M=f.default.acequire("ace/lib/dom");w.prototype.setKeyboardHandler=function(e){var t=this.$handlers;if(t[t.length-1]!=e){for(;t[t.length-1]&&t[t.length-1]!=this.$defaultHandler;)this.removeKeyboardHandler(t[t.length-1]);this.addKeyboardHandler(e,t.length)}};var U=/[a-zA-Z_0-9\.\$\-\u00A2-\uFFFF]/;I.retrievePrecedingIdentifier=function(e,t,o){o=o||U;for(var n=[],r=t-1;r>=0&&o.test(e[r]);r--)n.push(e[r]);return n.reverse().join("")},N.FilteredList.prototype.setFilter=function(e){if(e.length>this.filterText&&0===e.lastIndexOf(this.filterText,0))var t=this.filtered;else var t=this.all;this.filterText=e,t=this.filterCompletions(t,this.filterText),t=t.sort(function(e,t){return t.exactMatch-e.exactMatch||t.score-e.score});var o;try{o=new RegExp(this.filterText)}catch(e){}var n=null;t=t.filter(function(e){var t=e.snippet||e.caption||e.value;return t!==n&&(n=t,o&&o.test(e.value)&&!0)}),this.filtered=t},N.FilteredList.prototype.filterCompletions=function(e,t){var o=[];e:for(var n,r=0;n=e[r];r++){var a=n.value||n.caption||n.snippet;if(a){var i,l,c=-1,d=0,p=0;if(this.exactMatch){if(t!==a.substr(0,t.length))continue e}else{i=a.indexOf(t);for(var _=0;_<t.length;_++){if(i<0)continue e;l=i-c-1,l>0&&(-1===c&&(p+=10),p+=l),d=u(d,s(1,i)),c=i++}}n.matchMask=d,n.exactMatch=p?0:1,n.score=(n.score||0)-p,o.push(n)}}return o},N.Autocomplete.prototype.$init=function(){return this.popup=new j(document.body||document.documentElement),this.popup.on("click",function(e){this.insertMatch(),e.stop()}.bind(this)),this.popup.focus=this.editor.focus.bind(this.editor),this.popup.on("show",this.tooltipTimer.bind(null,null)),this.popup.on("select",this.tooltipTimer.bind(null,null)),this.popup.on("changeHoverMarker",this.tooltipTimer.bind(null,null)),this.popup};var H=function(e){var t=new A(e);t.$maxLines=4;var o=new L(t);return o.setHighlightActiveLine(!1),o.setShowPrintMargin(!1),o.renderer.setShowGutter(!1),o.renderer.setHighlightGutterLine(!1),o.$mouseHandler.$focusWaitTimout=0,o.$highlightTagPending=!0,o},j=function(e){var t=M.createElement("div"),o=new H(t);e&&e.appendChild(t),t.style.display="none",o.renderer.content.style.cursor="default",o.renderer.setStyle("ace_autocomplete"),o.setOption("displayIndentGuides",!1),o.setOption("dragDelay",150);var n=function(){};o.focus=n,o.$isFocused=!0,o.renderer.$cursorLayer.restartTimer=n,o.renderer.$cursorLayer.element.style.opacity=0,o.renderer.$maxLines=8,o.renderer.$keepTextAreaAtCursor=!1,o.setHighlightActiveLine(!1),o.session.highlight(""),o.session.$searchHighlight.clazz="ace_highlight-marker",o.on("mousedown",function(e){var t=e.getDocumentPosition();o.selection.moveToPosition(t),i.start.row=i.end.row=t.row,e.stop()});var r,a=new C(-1,0,-1,1/0),i=new C(-1,0,-1,1/0);i.id=o.session.addMarker(i,"ace_active-line","fullLine"),o.setSelectOnHover=function(e){e?a.id&&(o.session.removeMarker(a.id),a.id=null):a.id=o.session.addMarker(a,"ace_line-hover","fullLine")},o.setSelectOnHover(!1),o.on("mousemove",function(e){if(!r)return void(r=e);if(r.x!=e.x||r.y!=e.y){r=e,r.scrollTop=o.renderer.scrollTop;var t=r.getDocumentPosition().row;a.start.row!=t&&(a.id||o.setRow(t),c(t))}}),o.renderer.on("beforeRender",function(){if(r&&-1!=a.start.row){r.$pos=null;var e=r.getDocumentPosition().row;a.id||o.setRow(e),c(e,!0)}}),o.renderer.on("afterRender",function(){var e=o.getRow(),t=o.renderer.$textLayer,n=t.element.childNodes[e-t.config.firstRow];n!=t.selectedNode&&(t.selectedNode&&M.removeCssClass(t.selectedNode,"ace_selected"),t.selectedNode=n,n&&M.addCssClass(n,"ace_selected"))});var u=function(){c(-1)},c=function(e,t){e!==a.start.row&&(a.start.row=a.end.row=e,t||o.session._emit("changeBackMarker"),o._emit("changeHoverMarker"))};o.getHoveredRow=function(){return a.start.row},D.addListener(o.container,"mouseout",u),o.on("hide",u),o.on("changeSelection",u),o.session.doc.getLength=function(){return o.data.length},o.session.doc.getLine=function(e){var t=o.data[e];return"string"==typeof t?t:t&&t.value||""};var d=o.session.bgTokenizer;return d.$tokenizeRow=function(e){var t=o.data[e],n=[];if(!t)return n;"string"==typeof t&&(t={value:t}),t.caption||(t.caption=t.value||t.name);for(var r,a,i=-1,u=0;u<t.caption.length;u++)a=t.caption[u],r=l(t.matchMask,s(1,u))?1:0,i!==r?(n.push({type:t.className||(r?"completion-highlight":""),value:a}),i=r):n[n.length-1].value+=a;if(t.meta){var c=o.renderer.$size.scrollerWidth/o.renderer.layerConfig.characterWidth,d=t.meta;d.length+t.caption.length>c-2&&(d=d.substr(0,c-t.caption.length-3)+""),n.push({type:"rightAlignedText",value:d})}return n},d.$updateOnChange=n,d.start=n,o.session.$computeWidth=function(){return this.screenWidth=0},o.$blockScrolling=1/0,o.isOpen=!1,o.isTopdown=!1,o.data=[],o.setData=function(e){o.setValue(x.stringRepeat("\n",e.length),-1),o.data=e||[],o.setRow(0)},o.getData=function(e){return o.data[e]},o.getRow=function(){return i.start.row},o.setRow=function(e){e=Math.max(0,Math.min(this.data.length,e)),i.start.row!=e&&(o.selection.clearSelection(),i.start.row=i.end.row=e||0,o.session._emit("changeBackMarker"),o.moveCursorTo(e||0,0),o.isOpen&&o._signal("select"))},o.on("changeSelection",function(){o.isOpen&&o.setRow(o.selection.lead.row),o.renderer.scrollCursorIntoView()}),o.hide=function(){this.container.style.display="none",this._signal("hide"),o.isOpen=!1},o.show=function(e,t,n){var a=this.container,i=window.innerHeight,s=window.innerWidth,l=this.renderer,u=l.$maxLines*t*1.4,c=e.top+this.$borderSize;c>i/2&&!n&&c+t+u>i?(l.$maxPixelHeight=c-2*this.$borderSize,a.style.top="",a.style.bottom=i-c+"px",o.isTopdown=!1):(c+=t,l.$maxPixelHeight=i-c-.2*t,a.style.top=c+"px",a.style.bottom="",o.isTopdown=!0),a.style.display="",this.renderer.$textLayer.checkForSizeChanges();var d=e.left;d+a.offsetWidth>s&&(d=s-a.offsetWidth),a.style.left=d+"px",this._signal("show"),r=null,o.isOpen=!0},o.getTextLeftOffset=function(){return this.$borderSize+this.renderer.$padding+this.$imageSize},o.$imageSize=0,o.$borderSize=1,o};window.editorSessions={};var F=["minLines","maxLines","readOnly","highlightActiveLine","tabSize","enableBasicAutocompletion","enableLiveAutocompletion","enableSnippets"],B=t.AceEditor=function(e){function t(e){r(this,t);var o=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return["onChange","onFocus","onBlur","onCut","onCopy","onPaste","onScroll","handleOptions","onCursorChange","onVimModeChange"].forEach(function(e){o[e]=o[e].bind(o)}),o.getSelectionRange=function(){return o.editor.getSelectionRange()},o.focus=function(){o.editor.focus()},o.setValue=function(e){o.editor.setValue(e),o.editor.session.selection.moveCursorFileStart(),o.editor.focus()},o}return i(t,e),_(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props,o=t.className,n=t.onBeforeLoad,r=t.mode,a=t.focus,i=t.theme,s=t.fontSize,l=t.sessionId,u=t.value,p=t.cursorStart,_=t.showGutter,h=t.wrapEnabled,m=t.showPrintMargin,g=t.keyboardHandler,v=t.onLoad,y=t.commands,b=t.annotations,C=t.markers;this.editor=f.default.edit(this.refs.editor),this.editor.$blockScrolling=1/0;var E=new S;if(E.handleKeyboard=function(t,o,n,r,a){if(e.props.keyboardHandlerFunction)return e.props.keyboardHandlerFunction(t,o,n,r,a)},this.editor.keyBinding.addKeyboardHandler(E,0),this.props.onEditorCreation&&this.props.onEditorCreation(this.editor),l){var T={},O=c(l,this.createNewDocument.bind(this,l,u),r,T);this.editor.setSession(O),T.created&&this.props.onSessionCreation&&this.props.onSessionCreation(this.props.sessionId,this.editor.getSession())}n&&n(f.default);for(var P=Object.keys(this.props.editorProps),w=0;w<P.length;w++)this.editor[P[w]]=this.props.editorProps[P[w]];l||this.editor.getSession().setMode("ace/mode/"+r),this.editor.setTheme("ace/theme/"+i),this.editor.setFontSize(s),l||this.editor.setValue(u,p),this.editor.renderer.setShowGutter(_),this.editor.getSession().setUseWrapMode(h),this.editor.setShowPrintMargin(m),this.editor.on("focus",this.onFocus),this.editor.on("blur",this.onBlur),d(this.editor,"onCut",this.onCut),d(this.editor,"onCopy",this.onCopy),d(this.editor,"onPaste",this.onPaste),d(this.editor,"onCursorChange",this.onCursorChange),this.editor.on("change",this.onChange),this.editor.session.on("changeScrollTop",this.onScroll),this.handleOptions(this.props),this.editor.getSession().setAnnotations(b||[]),this.handleMarkers(C||[]),this.props.completer&&k(this.props.completer);for(var R=this.editor.$options,I=0;I<F.length;I++){var N=F[I];R.hasOwnProperty(N)&&this.editor.setOption(N,this.props[N])}Array.isArray(y)&&y.forEach(function(t){e.editor.commands.addCommand(t)}),g&&(this.editor.setKeyboardHandler("ace/keyboard/"+g),"vim"==g&&this.editor.state.cm.on("vim-mode-change",this.onVimModeChange)),o&&(this.refs.editor.className+=" "+o),a&&this.editor.focus(),v&&v(this.editor)}},{key:"componentWillReceiveProps",value:function(e){var t=this.props;if(e.sessionId!=t.sessionId){var o={},n=c(e.sessionId,this.createNewDocument.bind(this,e.sessionId,e.value),e.mode,o);this.editor.setSession(n),this.editor.focus(),o.created&&this.props.onSessionCreation&&this.props.onSessionCreation(e.sessionId,this.editor.getSession())}for(var r=0;r<F.length;r++){var a=F[r];e[a]!==t[a]&&this.editor.setOption(a,e[a])}if(e.className!==t.className){var i=this.refs.editor.className,s=i.trim().split(" ");t.className.trim().split(" ").forEach(function(e){var t=s.indexOf(e);s.splice(t,1)}),this.refs.editor.className=" "+e.className+" "+s.join(" ")}if(e.theme!==t.theme&&this.editor.setTheme("ace/theme/"+e.theme),e.keyboardHandler!==t.keyboardHandler&&(this.editor.setKeyboardHandler(e.keyboardHandler?"ace/keyboard/"+e.keyboardHandler:null),"vim"==e.keyboardHandler&&this.editor.state.cm.on("vim-mode-change",this.onVimModeChange)),e.fontSize!==t.fontSize&&this.editor.setFontSize(e.fontSize),e.wrapEnabled!==t.wrapEnabled&&this.editor.getSession().setUseWrapMode(e.wrapEnabled),e.showPrintMargin!==t.showPrintMargin&&this.editor.setShowPrintMargin(e.showPrintMargin),e.showGutter!==t.showGutter&&this.editor.renderer.setShowGutter(e.showGutter),(0,y.default)(e.setOptions,t.setOptions)||this.handleOptions(e),(0,y.default)(e.annotations,t.annotations)||this.editor.getSession().setAnnotations(e.annotations||[]),(0,y.default)(e.markers,t.markers)||this.handleMarkers(e.markers||[]),this.editor&&this.editor.getValue()!==e.value){this.silent=!0;var l=this.editor.session.selection.toJSON();this.editor.setValue(e.value,e.cursorStart),this.editor.session.selection.fromJSON(l),this.silent=!1}e.focus&&!t.focus&&this.editor.focus(),e.height!==this.props.height&&this.editor.resize(),e.completer&&e.completer!=t.completer&&k(e.completer)}},{key:"componentWillUnmount",value:function(){this.editor.setSession(null),this.editor.destroy(),this.editor=null}},{key:"createNewDocument",value:function(e,t){var o=new O(t);return this.props.onDocumentCreation&&this.props.onDocumentCreation(e,o),o}},{key:"onChange",value:function(e){if(this.props.onChange&&!this.silent){var t=this.editor.getValue();this.props.onChange(t,e)}}},{key:"onFocus",value:function(){this.props.onFocus&&this.props.onFocus()}},{key:"onBlur",value:function(){this.props.onBlur&&this.props.onBlur()}},{key:"onCut",value:function(e,t){if(this.props.onCut){!0===this.props.onCut(t[0])&&e()}else e()}},{key:"onCopy",value:function(e,t){if(this.props.onCopy){!0===this.props.onCopy(t[0])&&e()}else e()}},{key:"onPaste",value:function(e,t){if(this.props.onPaste){!0===this.props.onPaste(t[0])&&e()}else e()}},{key:"onCursorChange",value:function(e){if(e(),this.props.onCursorChange){var t=this.editor.getCursorPosition(),o=t.row,n=t.column;this.props.onCursorChange(o,n)}}},{key:"onVimModeChange",value:function(e){this.props.onVimModeChange&&this.props.onVimModeChange(e.mode)}},{key:"onScroll",value:function(){this.props.onScroll&&this.props.onScroll(this.editor)}},{key:"handleOptions",value:function(e){for(var t=Object.keys(e.setOptions),o=0;o<t.length;o++)this.editor.setOption(t[o],e.setOptions[t[o]])}},{key:"handleMarkers",value:function(e){var t=this,o=this.editor.getSession().getMarkers(!0);for(var n in o)o.hasOwnProperty(n)&&this.editor.getSession().removeMarker(o[n].id);o=this.editor.getSession().getMarkers(!1);for(var r in o)o.hasOwnProperty(r)&&this.editor.getSession().removeMarker(o[r].id);e.forEach(function(e){var o=e.startRow,n=e.startCol,r=e.endRow,a=e.endCol,i=e.className,s=e.type,l=e.inFront,u=void 0!==l&&l,c=new C(o,n,r,a);t.editor.getSession().addMarker(c,i,s,u)})}},{key:"isVimInInsertMode",value:function(){return!(!this.editor.state||!this.editor.state.cm.state.vim.insertMode)}},{key:"render",value:function(){var e=this.props,t=e.name,o=e.width,n=e.height,r=e.style,a=p({width:o,height:n},r);return g.default.createElement("div",{ref:"editor",id:t,style:a})}}]),t}(m.PureComponent);B.propTypes={mode:m.PropTypes.string,focus:m.PropTypes.bool,theme:m.PropTypes.string,name:m.PropTypes.string,sessionId:m.PropTypes.string,className:m.PropTypes.string,height:m.PropTypes.string,width:m.PropTypes.string,fontSize:m.PropTypes.number,showGutter:m.PropTypes.bool,onChange:m.PropTypes.func,onCut:m.PropTypes.func,onCopy:m.PropTypes.func,onPaste:m.PropTypes.func,onFocus:m.PropTypes.func,onBlur:m.PropTypes.func,onScroll:m.PropTypes.func,value:m.PropTypes.string,onLoad:m.PropTypes.func,onCursorChange:m.PropTypes.func,onBeforeLoad:m.PropTypes.func,minLines:m.PropTypes.number,maxLines:m.PropTypes.number,readOnly:m.PropTypes.bool,highlightActiveLine:m.PropTypes.bool,tabSize:m.PropTypes.number,showPrintMargin:m.PropTypes.bool,cursorStart:m.PropTypes.number,editorProps:m.PropTypes.object,setOptions:m.PropTypes.object,annotations:m.PropTypes.array,markers:m.PropTypes.array,keyboardHandler:m.PropTypes.string,wrapEnabled:m.PropTypes.bool,enableBasicAutocompletion:m.PropTypes.oneOfType([m.PropTypes.bool,m.PropTypes.array]),enableLiveAutocompletion:m.PropTypes.oneOfType([m.PropTypes.bool,m.PropTypes.array]),commands:m.PropTypes.array,onEditorCreation:m.PropTypes.func,onSessionCreation:m.PropTypes.func,onDocumentCreation:m.PropTypes.func,keyboardHandlerFunction:m.PropTypes.func,completer:m.PropTypes.object,onVimModeChange:m.PropTypes.func},B.defaultProps={name:"brace-editor",focus:!1,mode:"",theme:"",height:"500px",width:"500px",value:"",fontSize:12,showGutter:!0,onChange:null,onPaste:null,onLoad:null,onScroll:null,minLines:null,maxLines:null,readOnly:!1,highlightActiveLine:!0,showPrintMargin:!0,tabSize:4,cursorStart:1,editorProps:{},setOptions:{},wrapEnabled:!1,enableBasicAutocompletion:!1,enableLiveAutocompletion:!1,onEditorCreation:null,onSessionCreation:null,onDocumentCreation:null,keyboardHandlerFunction:null,completer:null,onVimModeChange:null}},yUpC:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.LANG_MODE_MAP={C:"c_cpp",CPP:"c_cpp",CPP11:"c_cpp",CPP14:"c_cpp",PYTHON:"python",PYTHON3:"python",PERL:"perl",PASCAL:"pascal",JAVA:"java",JAVA8:"java",RUBY:"ruby",GO:"golang",PHP:"php",CSHARP:"csharp",FSHARP:"csharp",HTML:"html",CSS:"css",JAVASCRIPT:"javascript",JAVASCRIPT_UI:"javascript",JAVASCRIPT_NODE:"javascript",HASKELL:"haskell",CLOJURE:"clojure",SCALA:"scala",TEXTFILE:"html",BEFUNGE:"c_cpp",LOLCODE:"c_cpp",WHENEVER:"c_cpp",OBJECTIVEC:"objectivec",LISP:"lisp",RACKET:"lisp",LISP_SBCL:"lisp",R:"r",RUST:"rust",MYSQL:"mysql",POSTGRESQL:"pgsql",MSSQL:"sqlserver",LUA:"lua",GROOVY:"groovy",D:"d",ERLANG:"erlang",JULIA:"julia",OCAML:"ocaml",OCTAVE:"matlab",SWIFT:"swift",ORACLE_DB:"sql",KOTLIN:"kotlin"},t.EXTENSION_TO_LANG_MAP={bf:"BEFUNGE",c:"C",clj:"CLOJURE",cpp:"CPP",cpp11:"CPP11",cpp14:"CPP14",cs:"CSHARP",css:"CSS",d:"D",erl:"ERLANG",fs:"FSHARP",go:"GO",groovy:"GROOVY",hs:"HASKELL",html:"HTML",java:"JAVA",java8:"JAVA8",jl:"JULIA",js:"JAVASCRIPT",kt:"KOTLIN",kts:"KOTLIN",lisp:"LISP_SBCL",lol:"LOLCODE",lua:"LUA",m:"OBJECTIVEC",ml:"OCAML",mssql:"MSSQL",njs:"JAVASCRIPT_NODE",oct:"OCTAVE",pas:"PASCAL",php:"PHP",pl:"PERL",psql:"POSTGRESQL",py:"PYTHON",py3:"PYTHON3",r:"R",rb:"RUBY",rkt:"RACKET",rs:"RUST",scala:"SCALA",scm:"LISP",sql:"MYSQL",swift:"SWIFT",teen:"WHENEVER",txt:"TEXTFILE",vb:"VB",oracle:"ORACLE"},t.THEME_MAP=[{name:CodeEditorText.lightTheme,value:"crimson_editor",type:"light"},{name:CodeEditorText.darkTheme,value:"monokai",type:"dark"}],t.DEFAULT_CODE_EDITOR_THEME="crimson_editor",t.CODE_EDITOR_THEME_TOKEN="code_editor_theme_token"},yqcu:function(e,t,o){"use strict";function n(e,t){return void 0===t&&(t={}),e in r?(t.created=!1,r[e]):(r[e]=[],t.created=!0,r[e])}Object.defineProperty(t,"__esModule",{value:!0}),t.getOrCreateReadonlyRanges=n,window.SessionIdReadonlyRangesMap={};var r=window.SessionIdReadonlyRangesMap},zp53:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={sub_editors:{}}}},["H2Zf"]);
//# sourceMappingURL=sub-editor.js.map